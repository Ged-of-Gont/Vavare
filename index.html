<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Vävare</title>

  <!-- Modern fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Fraunces:opsz,wght@9..144,600&display=swap"
    rel="stylesheet">

  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <header class="page-header">
    <a href="/" class="site-title" aria-label="Home">
      <svg class="site-logo" viewBox="0 0 1496.2 344.09" role="img" aria-hidden="true">
        <use href="logo-sprite.svg#logo-wordmark"></use>
      </svg>
    </a>

    <p class="tagline">Draft, color, and explore classic 4-shaft structures.</p>


  </header>

  <section class="card controls">
    <div class="controls-grid">
      <!-- ROW 1: main selectors -->
      <div class="control-unit">
        <label for="pattern">Pattern</label>
        <select id="pattern">
          <optgroup label="Plain / Basket / Foundations">
            <option value="plain">Plain (tabby, 2-shaft)</option>
            <option value="basket2x2">Basket 2×2 (2-shaft)</option>
            <option value="logCabin">Log Cabin (color-and-weave)</option>
          </optgroup>

          <optgroup label="Straight & ratio twills">
            <option value="twill2x2">Twill 2×2 (balanced, 4-shaft)</option>
            <option value="twill3_1">Twill 3/1 (warp-faced, 4-shaft)</option>
            <option value="twill1_3">Twill 1/3 (weft-faced, 4-shaft)</option>
            <option value="twill2_1_3shaft">Twill 2/1 (3-shaft)</option>
            <option value="windowpaneTwill4">Windowpane Twill (checks, 4-shaft)</option>
          </optgroup>

          <optgroup label="Point & fancy twills">
            <option value="pointTwill4">Point Twill (4-shaft)</option>
            <option value="extendedPointTwill4">Extended Point Twill (4-shaft)</option>
            <option value="brokenTwill4">Broken Twill (4-shaft)</option>
            <option value="brokenDiamond4">Broken Diamond Twill (4-shaft)</option>
            <option value="herringbone4">Herringbone (4-shaft)</option>
            <option value="birdsEye4">Bird’s-Eye (4-shaft)</option>
            <option value="gooseEye4">Goose-Eye (4-shaft)</option>
            <option value="starTwill4">Star Twill (4-shaft)</option>
            <option value="roseTwill4">Rose Twill (4-shaft)</option>
            <option value="nordicCross4">Nordic Cross Twill (4-shaft)</option>
          </optgroup>

          <optgroup label="Textured / waffle">
            <option value="waffle4">Waffle Weave (4-shaft)</option>
          </optgroup>

          <optgroup label="Rosepath / Scandinavian twill-based">
            <option value="rosepath4">Rosepath (4-shaft)</option>
            <option value="msos4">M’s &amp; O’s (4-shaft)</option>
            <option value="krokbragd3on4">Krokbragd (3-shaft on 4)</option>
          </optgroup>

          <optgroup label="Block / Tied weaves (Dräll / coverlet)">
            <option value="monksBelt4">Monk’s Belt / Munkabälte (4-shaft)</option>
            <option value="halvDrall4">Halvdräll (4-shaft)</option>
            <option value="summerWinter4">Summer &amp; Winter (4-shaft)</option>
            <option value="crackle4">Crackle Weave (4-shaft)</option>
            <option value="daldrall4">Daldräll (4-shaft)</option>
            <option value="jamtlandsdrall4">Jämtlandsdräll (4-shaft)</option>
          </optgroup>

          <optgroup label="Lace / Spot weaves">
            <option value="huckSpot4">Huck (spot, 4-shaft)</option>
            <option value="huckLace4">Huck Lace (4-shaft)</option>
            <option value="swedishLace4">Swedish Lace (4-shaft)</option>
            <option value="spotBronson4">Spot Bronson (4-shaft)</option>
            <option value="bronsonLace4">Bronson Lace (4-shaft)</option>
          </optgroup>

          <optgroup label="Color-and-weave twills">
            <option value="shadowTwill4">Shadow Twill (4-shaft)</option>
            <option value="houndstooth4">Houndstooth (4-shaft)</option>
          </optgroup>
        </select>

      </div>

      <!-- NEW: Color layout selector -->
      <div class="control-unit">
        <label for="layout">Color layout</label>
        <select id="layout">
          <option value="auto">Auto (follow pattern)</option>
          <option value="stripes">Stripes (A/B)</option>
          <option value="logCabin">Log Cabin (AABB)</option>
          <option value="houndstooth">Houndstooth (4×4)</option>
        </select>
      </div>

      <div class="control-unit">
        <label for="warpCount">Warp ends</label>
        <input id="warpCount" type="number" min="4" max="48" value="24" />
      </div>

      <div class="control-unit">
        <label for="weftCount">Weft picks</label>
        <input id="weftCount" type="number" min="4" max="48" value="24" />
      </div>

      <div class="control-unit">
        <label for="cellSize">Cell size (px)</label>
        <input id="cellSize" type="number" min="10" max="60" value="33" />
      </div>

      <!-- ROW 2: color + buttons -->
      <div class="control-unit control-unit--colors">
        <label>Warp colors</label>
        <div class="color-row">
          <input id="warpA" type="color" />
          <input id="warpB" type="color" />
        </div>
      </div>

      <div class="control-unit control-unit--colors">
        <label>Weft colors</label>
        <div class="color-row">
          <input id="weftA" type="color" />
          <input id="weftB" type="color" />
        </div>
      </div>

      <div class="control-unit control-unit--btn">
        <button id="applyAB" class="btn">Apply colors</button>
        <button id="randomize" class="btn">Random colors</button>
      </div>

      <div class="control-unit control-unit--btn">
        <button id="save" class="btn">Save Pattern</button>
        <label class="btn file">
          Load Pattern
          <input id="load" type="file" accept="application/json" />
        </label>
      </div>
    </div>
  </section>



  <section class="card canvas-card">
    <div class="assembly">
      <div class="layout">
        <div class="spacer" aria-hidden="true"></div>
        <div id="warpBar" class="bar warp"></div>

        <div class="spacer2" aria-hidden="true"></div>
        <div id="threading" class="draft threading"></div>

        <div id="weftBar" class="bar weft"></div>
        <canvas id="weave" width="800" height="800" aria-label="weave preview"></canvas>
        <div id="treadling" class="draft treadling"></div>
      </div>

      <div id="tieupWrap" class="tieup-wrap">
        <div class="tieup">
          <div class="hdr"></div>
          <div class="hdr">S1</div>
          <div class="hdr">S2</div>
          <div class="hdr">S3</div>
          <div class="hdr">S4</div>
          <div class="rowhdr">T1</div><label><input type="checkbox" data-t="1" data-s="1"></label><label><input
              type="checkbox" data-t="1" data-s="2"></label><label><input type="checkbox" data-t="1"
              data-s="3"></label><label><input type="checkbox" data-t="1" data-s="4"></label>
          <div class="rowhdr">T2</div><label><input type="checkbox" data-t="2" data-s="1"></label><label><input
              type="checkbox" data-t="2" data-s="2"></label><label><input type="checkbox" data-t="2"
              data-s="3"></label><label><input type="checkbox" data-t="2" data-s="4"></label>
          <div class="rowhdr">T3</div><label><input type="checkbox" data-t="3" data-s="1"></label><label><input
              type="checkbox" data-t="3" data-s="2"></label><label><input type="checkbox" data-t="3"
              data-s="3"></label><label><input type="checkbox" data-t="3" data-s="4"></label>
          <div class="rowhdr">T4</div><label><input type="checkbox" data-t="4" data-s="1"></label><label><input
              type="checkbox" data-t="4" data-s="2"></label><label><input type="checkbox" data-t="4"
              data-s="3"></label><label><input type="checkbox" data-t="4" data-s="4"></label>
        </div>
      </div>
    </div>
  </section>

  <footer class="footer">© Jonathan William Horn 2025</footer>

  <script src="presets.js"></script>
  <script src="weave.js"></script>
  <script src="app.js"></script>
</body>

</html>